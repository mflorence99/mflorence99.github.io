(self.webpackChunkwashington_app=self.webpackChunkwashington_app||[]).push([[3880],{8943:t=>{"use strict";t.exports=function(t){var e=t.length;return t.reduce(function(t,n,i){return t.x+=n.x,t.y+=n.y,i===e-1&&(t.x/=e,t.y/=e),t},{x:0,y:0})}},3880:(t,e,n)=>{"use strict";n.r(e),n.d(e,{HomeModule:()=>E});var i=n(1332),s=n(1776),a=n(6889),o=n(2272);let r=(()=>{class t extends s.y{constructor(){super(t=>this.life$.subscribe(t)),this.life$=new a.x}ngOnDestroy(){this.life$.next(),this.life$.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();var l=n(7395),c=n(4689),h=n(5755),u=n(8943),m=n.n(u),d=n(8168),f=n(1849),p=n(4092),g=n(9483),v=n(7724),Z=n(8583),w=n(850);const x=["map"],T=["menu"],b=["searchbar"];function y(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"ion-list"),o.TgZ(1,"ion-item",20),o.NdJ("click",function(){const e=o.CHM(t).$implicit;return o.oxw().switchTo(e)}),o._UZ(2,"ion-icon",21),o.TgZ(3,"ion-label"),o._uU(4),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=e.$implicit;o.xp6(4),o.Oqu(t.title)}}function q(t,e){if(1&t&&(o.TgZ(0,"li"),o.TgZ(1,"div",22),o._uU(2," \xa0 "),o.qZA(),o._uU(3," \xa0 "),o.TgZ(4,"div",23),o._uU(5),o.qZA(),o.qZA()),2&t){const t=e.$implicit;o.xp6(1),o.Jzz("background-color: var(--shade-u",t[0],")"),o.xp6(4),o.Oqu(t[1])}}const A=function(t){return{animating:t}},k=function(t){return{animating:t,lots:!0}},z=function(t){return{loading:t}};let C=(()=>{class t{constructor(t,e,n,i,s){this.actions$=t,this.destroy$=e,this.model=n,this.selection=i,this.view=s,this.animating=!0,this.loading=!0,this.maps=l.F}legend(){return Object.entries(i.y)}maxTranslate(){var t;const e=null===(t=this.map)||void 0===t?void 0:t.nativeElement;return e?[e.parentElement.offsetWidth-e.offsetWidth*this.zoom,e.parentElement.offsetHeight-e.offsetHeight*this.zoom]:[0,0]}minTranslate(){return[0,0]}maxScale(){return 2}minScale(){var t;const e=null===(t=this.map)||void 0===t?void 0:t.nativeElement;return e?Math.max(e.parentElement.offsetWidth/e.offsetWidth,e.parentElement.offsetHeight/e.offsetHeight):0}ngOnInit(){this.handleActions$(),this.createStylesheet()}scale({scale:t,center:e}){if(this.zoom&&e){const e=Math.min(this.maxScale(),Math.max(this.minScale(),t*this.zoom));this.view.scale(e,[0,0])}}scaleDown(){this.zoom=this.view.view.scale,this.scale({scale:.9,center:this.centerOfView()})}scaleUp(){this.zoom=this.view.view.scale,this.scale({scale:1.1,center:this.centerOfView()})}switchTo(t){this.loading=!0,this.menu.close(!0),this.model.switchTo(t),this.xlate=null,this.zoom=null}trackByMap(t,e){return e.id}translate({deltaX:t,deltaY:e}){if(this.xlate){const n=this.maxTranslate(),i=this.minTranslate(),s=[t/this.zoom+this.xlate[0],e/this.zoom+this.xlate[1]];this.view.translate([Math.max(n[0],Math.min(i[0],s[0])),Math.max(n[1],Math.min(i[1],s[1]))])}}translateBegin(){this.animating=!1,this.xlate=this.view.view.translate,this.zoom=this.view.view.scale}translateEnd(){this.animating=!0,this.xlate=this.view.view.translate,this.zoom=this.view.view.scale}centerOfLots(t){const e=t.reduce((t,e)=>{const n=document.getElementById(e.id);if(n){const e=n.getAttribute("points").split(" ").map(t=>{const[e,n]=t.split(",");return{x:Number(e),y:Number(n)}});t.push(m()(e))}return t},[]);return 0===e.length?null:1===e.length?e[0]:m()(e)}centerOfView(){var t;const e=null===(t=this.map)||void 0===t?void 0:t.nativeElement;return e?{x:e.parentElement.offsetWidth/2,y:e.parentElement.offsetHeight/2}:null}clearLots(){for(;this.stylesheet.cssRules.length>0;)this.stylesheet.deleteRule(0)}createStylesheet(){const t=document.createElement("style");document.head.appendChild(t),this.stylesheet=t.sheet}handleActions$(){this.actions$.pipe((0,h.R)(this.destroy$),(0,c.h)(({status:t})=>"SUCCESSFUL"===t)).subscribe(({action:t})=>{const e=t["SelectionState.found"];null!=e&&(this.clearLots(),e.length>0&&this.selectLots(e))})}selectLots(t){t.forEach(t=>{this.stylesheet.insertRule(`svg-icon.lots svg g polygon[id='${t.id}'] {\n        stroke: var(--ion-color-danger);\n        stroke-width: 3;\n      }`)}),this.zoom=this.view.view.scale;const e=this.centerOfLots(t),n=this.centerOfView();if(e&&n){const t=this.maxTranslate(),i=this.minTranslate(),s=[-(Number(e.x)-n.x/this.zoom)*this.zoom,-(Number(e.y)-n.y/this.zoom)*this.zoom];this.view.translate([Math.max(t[0],Math.min(i[0],s[0])),Math.max(t[1],Math.min(i[1],s[1]))]),setTimeout(()=>this.xlate=this.view.view.translate,100)}}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(d.eX),o.Y36(r),o.Y36(f.g),o.Y36(p.f),o.Y36(g.f))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-home"]],viewQuery:function(t,e){if(1&t&&(o.Gf(x,5),o.Gf(T,5),o.Gf(b,5)),2&t){let t;o.iGM(t=o.CRH())&&(e.map=t.first),o.iGM(t=o.CRH())&&(e.menu=t.first),o.iGM(t=o.CRH())&&(e.searchbar=t.first)}},features:[o._Bn([r])],decls:30,vars:22,consts:[["content-id","theContent","side","start"],["menu",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend"],[4,"ngFor","ngForOf"],["id","theContent",1,"ion-page"],["slot","start"],["color","dark"],["slot","end"],["color","dark","shape","round",3,"disabled","click"],["name","add-circle"],["name","remove-circle"],[3,"fullscreen","scrollX","scrollY"],[1,"map",3,"ngClass","src","load","pan","panend","panstart"],["map",""],[3,"ngClass","src"],["enterkeyhint","Search","inputmode","search","placeholder","Lot # or address",1,"searchbar",3,"debounce","value","ionChange"],["searchbar",""],[1,"backdrop",3,"ngClass"],["name","timer"],["button","",3,"click"],["name","map","slot","start"],[1,"code"],[1,"desc"]],template:function(t,e){1&t&&(o.TgZ(0,"ion-menu",0,1),o.TgZ(2,"ion-header"),o.TgZ(3,"ion-toolbar"),o.TgZ(4,"ion-title"),o._uU(5,"Maps"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(6,"ion-content"),o.YNc(7,y,5,1,"ion-list",2),o.TgZ(8,"ul",3),o.YNc(9,q,6,4,"li",4),o.qZA(),o.qZA(),o.qZA(),o.TgZ(10,"main",5),o.TgZ(11,"ion-header"),o.TgZ(12,"ion-toolbar"),o.TgZ(13,"ion-buttons",6),o._UZ(14,"ion-menu-button",7),o.qZA(),o.TgZ(15,"ion-title"),o._uU(16),o.qZA(),o.TgZ(17,"ion-buttons",8),o.TgZ(18,"ion-button",9),o.NdJ("click",function(){return e.scaleUp()}),o._UZ(19,"ion-icon",10),o.qZA(),o.TgZ(20,"ion-button",9),o.NdJ("click",function(){return e.scaleDown()}),o._UZ(21,"ion-icon",11),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(22,"ion-content",12),o.TgZ(23,"img",13,14),o.NdJ("load",function(){return e.loading=!1})("pan",function(t){return e.translate(t)})("panend",function(){return e.translateEnd()})("panstart",function(){return e.translateBegin()}),o.qZA(),o._UZ(25,"svg-icon",15),o.TgZ(26,"ion-searchbar",16,17),o.NdJ("ionChange",function(t){return e.selection.searchFor(t.detail.value)}),o.qZA(),o.qZA(),o.TgZ(28,"article",18),o._UZ(29,"ion-icon",19),o.qZA(),o.qZA()),2&t&&(o.xp6(7),o.Q6J("ngForOf",e.maps)("ngForTrackBy",e.trackByMap),o.xp6(2),o.Q6J("ngForOf",e.legend()),o.xp6(7),o.Oqu(e.model.map.title),o.xp6(2),o.Q6J("disabled",e.view.view.scale>=e.maxScale()),o.xp6(2),o.Q6J("disabled",e.view.view.scale<=e.minScale()),o.xp6(2),o.Q6J("fullscreen",!0)("scrollX",!1)("scrollY",!1),o.xp6(1),o.Q6J("ngClass",o.VKq(16,A,e.animating))("src",e.model.map.src,o.LSH),o.xp6(2),o.Q6J("ngClass",o.VKq(18,k,e.animating))("src",e.model.map.lots),o.xp6(1),o.Q6J("debounce",500)("value",e.selection.text),o.xp6(2),o.Q6J("ngClass",o.VKq(20,z,e.loading)))},directives:[v.z0,v.Gu,v.sr,v.wd,v.W2,Z.sg,v.Sm,v.fG,v.YG,v.gu,Z.mk,w.bk,v.VI,v.j9,v.q_,v.Ie,v.Q$],encapsulation:2}),t})();var M=n(5437);const J=[{path:"",component:C}];let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[M.Bz.forChild(J)],M.Bz]}),t})();var _=n(3679);let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[w._J,Z.ez,_.u5,v.Pc,S]]}),t})()}}]);